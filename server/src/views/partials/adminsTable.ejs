<!-- admins.ejs -->
<!-- ... your code ... -->

<div style="text-align: right; margin-bottom: 10px;">
    <a href="/addAdmin">
      <button type="button" class="btn btn-primary" style="margin-right: 15px;">Add Admin</button>
    </a>
  </div>
  
  <!-- ... the table HTML ... -->
   
<table class="table align-items-center mb-0">
  <thead>
      <tr>
          <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Admin</th>
          <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Function</th>
          <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Status</th>
          <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Actions</th>
          <th class="text-secondary opacity-7"></th>
      </tr>
  </thead>
  <tbody>
      <% data.forEach(function(row) { %>
      <tr>
          <td>
              <div class="d-flex px-2 py-1">
            
                  <div class="d-flex flex-column justify-content-center">
                      <h6 class="mb-0 text-sm"><%= row.firstName %> <%= row.lastName %></h6>
                      <h6 class="text-xs text-secondary mb-0 admin-email"><%= row.email %></h6>
                  </div>
              </div>
          </td>
          <td>
              <p class="text-xs font-weight-bold mb-0"><%= row.role %></p>
              <!-- <p class="text-xs text-secondary mb-0">Organization</p> -->
          </td>
          <td class="align-middle text-center text-sm">
              <span class="badge badge-sm bg-gradient-success">Online</span>
          </td>
          <td class="align-middle text-center">
            
                <button type="button" class="btn btn-primary btn-sm ms-auto edit-button" onclick="console.log('Button clicked')">Edit</button>

          </td>
      </tr>
      <% }); %>
  </tbody>
</table>
<script>
document.addEventListener('DOMContentLoaded', () => {
  document.body.addEventListener('click', (event) => {
    if (event.target.classList.contains('edit-button')) {
      // This is an edit button
      const adminRow = event.target.closest('tr'); // Get the table row
      const adminEmail = adminRow.querySelector('.admin-email').textContent; // Get the email from the row
      console.log(`Redirecting to: /edit/${encodeURIComponent(adminEmail)}`); // Log the target URL
      window.location.href = '/edit/' + encodeURIComponent(adminEmail); // Go to the edit page for the admin
    }
  });
});

  </script>
  
  